(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{165:function(e,t,a){e.exports=a(198)},170:function(e,t,a){},197:function(e,t,a){},198:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(34),c=a.n(l),o=(a(170),a(171),a(200)),i=a(201),s=a(202),u=a(100),m=a(208),h=a(210),d=a(203),p=a(204),f=a(19);function g(){return r.a.createElement("div",null,r.a.createElement(o.a,{fluid:!0},r.a.createElement(i.a,null,r.a.createElement(s.a,null,r.a.createElement(u.a,{xs:4},r.a.createElement("h1",null,"WIFI 5G data viewer"),r.a.createElement("p",null,"Online tool to visualize 5G data")),r.a.createElement(u.a,{xs:8},r.a.createElement(m.a,null,r.a.createElement(m.a.Item,null,r.a.createElement("img",{className:"d-block w-100",src:"images/charts/band_occupacy.png",alt:"Band occupancy"}),r.a.createElement(m.a.Caption,null,r.a.createElement("h3",null,"Band occupancy"),r.a.createElement("p",null,"See the occupancy of each band across all time"))),r.a.createElement(m.a.Item,null,r.a.createElement("img",{className:"d-block w-100",src:"images/charts/channel_occupacy.png",alt:"Channel occupancy"}),r.a.createElement(m.a.Caption,null,r.a.createElement("h3",null,"Channel occupancy"),r.a.createElement("p",null,"See the occupancy of each channel across all time"))),r.a.createElement(m.a.Item,null,r.a.createElement("img",{className:"d-block w-100",src:"images/charts/runchart.png",alt:"Runchart"}),r.a.createElement(m.a.Caption,null,r.a.createElement("h3",null,"Runchart"),r.a.createElement("p",null,"See the occupancy's evolution of each channel through all time"))),r.a.createElement(m.a.Item,null,r.a.createElement("img",{className:"d-block w-100",src:"images/charts/spectogram.png",alt:"Spectrogram"}),r.a.createElement(m.a.Caption,null,r.a.createElement("h3",null,"Spectrogram"),r.a.createElement("p",null,"See the occupancy's evolution of each channel through all time")))))))),r.a.createElement(i.a,{className:"home-container"},r.a.createElement(s.a,null,r.a.createElement(u.a,null,r.a.createElement(h.a,null,r.a.createElement(h.a.Header,{as:"h5"},"Different locations around the world"),r.a.createElement(h.a.Body,null,r.a.createElement(h.a.Title,null,"Different datasets have been gathered from Catalonia, US..."),r.a.createElement(f.b,{to:"/places",className:"btn btn-primary"},"Check locations")))),r.a.createElement(u.a,null,r.a.createElement(m.a,{controls:!1,indicators:!1},r.a.createElement(m.a.Item,null,r.a.createElement("img",{className:"d-block w-100",src:"images/places/fcb.jpg",alt:"Camp nou"})),r.a.createElement(m.a.Item,null,r.a.createElement("img",{className:"d-block w-100",src:"images/places/rice.jpg",alt:"Rice University"}))))),r.a.createElement(s.a,null,r.a.createElement(u.a,null,r.a.createElement(d.a,{src:"images/charts/runchart.png",rounded:!0,className:"img-fluid"}),r.a.createElement(d.a,{src:"images/charts/spectogram.png",rounded:!0,className:"img-fluid"})),r.a.createElement(u.a,null,r.a.createElement(h.a,null,r.a.createElement(h.a.Header,{as:"h5"},"Several charts to observe the data"),r.a.createElement(h.a.Body,null,r.a.createElement(h.a.Title,null,"Bar charts, runcharts, spectrogram... All of them interactive charts to display the data as you want"),r.a.createElement(f.b,{to:"/places/fcb",className:"btn btn-primary"},"Check charts"))))),r.a.createElement(s.a,null,r.a.createElement(u.a,null,r.a.createElement(h.a,null,r.a.createElement(h.a.Header,{as:"h5"},"Wi-Fi Channel Bonding: an All-Channel System and Experimental Study from Urban Hotspots to a Sold-Out Stadium"),r.a.createElement(h.a.Body,null,r.a.createElement(h.a.Title,null,"All data have been measured and processed by Sergio Barrachina, author of this paper"),r.a.createElement(p.a,{variant:"primary"},"Check paper")))),r.a.createElement(u.a,null,r.a.createElement(d.a,{src:"images/paper.png",rounded:!0,className:"img-fluid"})))))}var b=a(11),y=a(12),v=a(14),E=a(13),x=a(53),k=a.n(x),C=a(54),O=a(18),j=function(e){Object(v.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={open:!1},n.handleInfoButtonClick=n.handleInfoButtonClick.bind(Object(O.a)(n)),n}return Object(y.a)(a,[{key:"handleInfoButtonClick",value:function(){this.setState((function(e){return{open:!e.open}}))}},{key:"render",value:function(){var e,t=this.props,a=t.text,n=t.city,l=t.type,c=t.address,o=t.link,i=this.state.open;return i&&(e=r.a.createElement("div",{className:"map-info"},r.a.createElement("span",null,l),r.a.createElement("span",null,n),r.a.createElement("span",null,c),r.a.createElement(f.b,{to:o,className:"map-info-lnk btn btn-outline-primary btn-sm",onClick:this.handleInfoButtonClick},"\u2192"))),r.a.createElement("div",{className:"map-marker"},a,r.a.createElement(p.a,{className:"map-info-btn",onClick:this.handleInfoButtonClick,variant:"outline-primary",size:"sm"},i?"-":"+"),e)}}]),a}(n.Component),w=function(e){Object(v.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={center:{lat:41.38,lng:2.12},zoom:13,locations:[{text:"Rice Village Apartments",type:"Apartment",city:"Houston",address:"2410 Shakespeare St",lat:29.714229583740234,lng:-95.4140396118164,link:"/places/coming-soon"},{text:"Rice Networks laboratory",type:"Apartment",city:"Houston",address:"6100 Main St, Houston, Duncan Hall",lat:29.720129013061523,lng:-95.39883422851562,link:"/places/coming-soon"},{text:"Technology for All",type:"Community center",city:"Houston",address:"2220 Broadway St # B",lat:29.70783233642578,lng:-95.27803039550781,link:"/places/coming-soon"},{text:"Flo Paris at Rice Village",type:"Caf\xe9",city:"Houston",address:"5407 Morningside Dr",lat:29.717344284057617,lng:-95.4149398803711,link:"/places/coming-soon"},{text:"Rice Village parking lot",type:"Shopping mall",city:"Houston",address:"2507 Amherst Spc #Dok",lat:29.715858459472656,lng:-95.41654968261719,link:"/places/coming-soon"},{text:"Apartament in Sagrera",type:"Apartment",city:"Barcelona",address:"c/Felip II 90",lat:41.41958999633789,lng:2.187973737716675,link:"/places/coming-soon"},{text:"Wireless Networking laboratory",type:"Campus",city:"Barcelona",address:"c/Roc Boronat 118",lat:41.40289306640625,lng:2.1943678855895996,link:"/places/coming-soon"},{text:"22@ area",type:"Office area",city:"Barcelona",address:"c/Llacuna 124",lat:41.40372848510742,lng:2.1954846382141113,link:"/places/coming-soon"},{text:"Hotel Gallery",type:"Hotel",city:"Barcelona",address:"c/Rosell\xf3 249",lat:41.395023345947266,lng:2.1596014499664307,link:"/places/coming-soon"},{text:"Sagrada Familia",type:"Tourist zone",city:"Barcelona",address:"Av. Gaud\xed 19",lat:41.4078254699707,lng:2.1743903160095215,link:"/places/coming-soon"},{text:"Camp Nou",type:"Stadium",city:"Barcelona",address:"c/d'Ar\xedstides Maillol 12",lat:41.37916564941406,lng:2.1199049949645996,link:"/places/fcb"}]},n}return Object(y.a)(a,[{key:"render",value:function(){var e=this.state.locations.map((function(e,t){return r.a.createElement(j,Object.assign({key:t},e))}));return r.a.createElement(i.a,{fluid:!0},r.a.createElement(s.a,null,r.a.createElement(u.a,{xs:6},r.a.createElement(s.a,{className:"map-container"},r.a.createElement(k.a,{options:C,bootstrapURLKeys:{key:"AIzaSyAT0-rCleVv535HxMw6G75w3UzGtj27nNg"},defaultCenter:{lat:29.718638196063072,lng:-95.40853309631348},defaultZoom:15},e))),r.a.createElement(u.a,{xs:6},r.a.createElement(s.a,{className:"map-container"},r.a.createElement(k.a,{options:C,bootstrapURLKeys:{key:"AIzaSyAT0-rCleVv535HxMw6G75w3UzGtj27nNg"},defaultCenter:{lat:41.395023345947266,lng:2.1596014499664307},defaultZoom:13},e)))))}}]),a}(n.Component),T=a(29),S=a(9),A=a(5),I=new(function(){function e(){Object(b.a)(this,e);var t=this.constructor.instance;if(t)return t;this.constructor.instance=this,this.responses={},this.baseUrl="http://localhost:8080",this.controller=new AbortController}return Object(y.a)(e,[{key:"_get",value:function(e,t){var a=this,n=this.controller.signal;return this.responses[e]||(this.responses[e]=new Promise((function(r,l){Object(A.g)("".concat(a.baseUrl,"/").concat(e),{signal:n}).then((function(e){return r(t(e))})).catch((function(t){delete a.responses[e],l(t)}))}))),this.responses[e]}},{key:"getChannelValues",value:function(e,t,a){var n="mongo/values/channel/".concat(e,"/threshold/").concat(t,"/ratio/").concat(a);return this._get(n,(function(e){return e}))}},{key:"getChannelsValues",value:function(e,t){var a="mongo/values/channels/threshold/".concat(e,"/ratio/").concat(t);return this._get(a,(function(e){return e}))}},{key:"getChannelOccupacy",value:function(e,t,a){var n="mongo/occupacy/channel/".concat(e,"/threshold/").concat(t,"/ratio/").concat(a);return this._get(n,(function(e){return e}))}},{key:"getChannelsOccupacy",value:function(e){var t="mongo/occupacy/channels/threshold/".concat(e);return this._get(t,(function(e){return e}))}},{key:"getBandOccupacy",value:function(e,t){var a="mongo/occupacy/band/".concat(e,"/threshold/").concat(t);return this._get(a,(function(e){return e}))}},{key:"abort",value:function(){this.controller.abort()}}]),e}()),N=a(205),D=function(e){Object(v.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={data:[],loading:0,bandNames:{1:"U-NII-1",2:"U-NII-2",3:"U-NII-2-C1",4:"U-NII-2-C2",5:"U-NII-2-C3",6:"U-NII-3"}},n}return Object(y.a)(a,[{key:"componentDidMount",value:function(){this.loadData(),this.setupDraw()}},{key:"componentDidUpdate",value:function(e){this.props.threshold!==e.threshold&&this.loadData()}},{key:"componentWillUnmount",value:function(){I.abort()}},{key:"loadData",value:function(){var e=this,t=this.props.threshold,a=Object(A.l)(1,7);this.setState((function(){return{loading:a.length}})),a.map((function(e){return I.getBandOccupacy(e,t)})).forEach((function(t){return t.then((function(t){var a=e.state.data,n=a.findIndex((function(e){return e.band===t.band}));-1!==n&&a.splice(n,1),a.push({band:t.band,value:t.data}),e.setState((function(e){return{data:a,loading:e.loading-1}}),(function(){this.drawChart()}))})).catch((function(){e.setState((function(e){return{loading:e.loading-1}}))}))}))}},{key:"setupDraw",value:function(){var e={top:40,right:20,bottom:60,left:65},t=Object(A.s)("#occupacy-band-chart").attr("viewbox","(0, 0, 960, 500)").attr("width","100%").attr("height",500),a=t.node().getBoundingClientRect(),n=a.width,r=a.height,l=function(e){return e.band},c=function(e){return e.value};this.setState((function(){return{selection:t,width:n,height:r,margin:e,title:"Band occupancy %",xAxisLabel:"Band",yAxisLabel:"[&sigma;] Occupancy",xValue:l,yValue:c}}),(function(){this.drawChart()}))}},{key:"drawChart",value:function(){var e=this.state,t=e.data,a=e.selection,n=e.width,r=e.height,l=e.margin,c=e.title,o=e.xAxisLabel,i=e.yAxisLabel,s=e.xValue,u=e.yValue,m=e.bandNames,h=n-l.right-l.left,d=r-l.top-l.bottom,p=Object(A.m)().domain(Object(A.l)(1,7)).range([0,h]).padding(.1),f=Object(A.n)().domain([1,0]).range([0,d]).nice(),g=Object(A.o)().domain(Object(A.l)(1,7)).range(A.r),b=Object(A.a)(p).tickSize(-d).tickFormat((function(e){return m[e]})).tickPadding(15),y=Object(A.b)(f).tickSize(-h).tickPadding(10),v=a.selectAll(".container").data([null]),E=v.enter().append("g").attr("class","container");E.merge(v).attr("transform","translate(".concat(l.left,", ").concat(l.top,")"));var x=v.select(".x-axis"),k=E.append("g").attr("class","x-axis");x.merge(k).call(b).attr("transform","translate(0, ".concat(d,")")).selectAll("domain").remove(),k.append("text").attr("class","axis-label").attr("y",40).attr("font-size",20).attr("fill","black").attr("text-anchor","middle").merge(x.select(".axis-label")).attr("x",h/2).text(o);var C=v.select(".y-axis"),O=E.append("g").attr("class","y-axis");C.merge(O).call(y).selectAll("domain").remove(),O.append("text").attr("class","axis-label").attr("y",-35).attr("fill","black").attr("transform","rotate(-90)").attr("text-anchor","middle").attr("font-size",20).merge(C.select(".axis-label")).attr("x",-d/2).html(i);var j=Object(A.d)(".2f"),w=v.merge(E).selectAll(".rect-band").data(t,(function(e){return s(e)})),T=w.enter().append("rect").attr("class","rect-band").attr("band",(function(e){return s(e)})).attr("stroke",(function(e){return g(s(e))})).attr("fill",(function(e){return g(s(e))})).attr("stroke-width",2).attr("stroke-linecap","round").attr("width",(function(e){return p.bandwidth()})).attr("y",(function(e){return d})).attr("height",0);T.merge(w).transition().attr("x",(function(e){return p(s(e))})).attr("y",(function(e){return f(u(e))})).attr("height",(function(e){return d-f(u(e))}));var S=w.merge(T).selectAll(".rect-band-title").data((function(e){return[e]}));S.enter().append("title").attr("class","rect-band-title").merge(S).text((function(e){return"".concat(m[s(e)],"\nOccupancy: ").concat(j(u(e)),"%\nChannels: [").concat(4*(s(e)-1)+1,", ").concat(4*(s(e)-1)+2,", ").concat(4*(s(e)-1)+3,", ").concat(4*(s(e)-1)+4,"]")}));var I=v.select(".title-group"),N=E.append("g").attr("class","title-group");I.merge(N).attr("transform","translate(".concat(h/2,", -10)")),N.append("text").attr("class","chart-title").attr("y",0).attr("font-size",30).attr("fill","black").attr("text-anchor","middle").merge(I.select(".chart-title")).html(c)}},{key:"render",value:function(){var e;return this.state.loading>0&&(e=r.a.createElement("div",{className:"loader"},r.a.createElement(N.a,{animation:"border"}))),r.a.createElement("section",null,e,r.a.createElement("svg",{id:"occupacy-band-chart"}))}}]),a}(n.Component),B=function(e){Object(v.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={data:[],loading:0},n}return Object(y.a)(a,[{key:"componentDidMount",value:function(){this.setupDraw(),this.loadData()}},{key:"componentDidUpdate",value:function(e){this.props.threshold!==e.threshold&&this.loadData()}},{key:"componentWillUnmount",value:function(){I.abort()}},{key:"loadData",value:function(){var e=this,t=this.props.threshold;this.setState((function(){return{loading:1}})),I.getChannelsOccupacy(t).then((function(t){e.setState((function(e){return{data:t.data,loading:e.loading-1}}),(function(){this.drawChart()}))})).catch((function(){e.setState((function(e){return{loading:e.loading-1}}))}))}},{key:"setupDraw",value:function(){var e={top:40,right:20,bottom:60,left:65},t=Object(A.s)("#occupacy-channel-chart").attr("viewbox","(0, 0, 960, 500)").attr("width","100%").attr("height",500),a=t.node().getBoundingClientRect(),n=a.width,r=a.height,l=function(e){return e.Channel},c=function(e){return e.Occupacy};this.setState((function(){return{selection:t,width:n,height:r,margin:e,title:"Channel occupancy %",xAxisLabel:"Channel",yAxisLabel:"Occupancy",xValue:l,yValue:c}}),(function(){this.drawChart()}))}},{key:"drawChart",value:function(){var e=this.state,t=e.data,a=e.selection,n=e.width,r=e.height,l=e.margin,c=e.title,o=e.xAxisLabel,i=e.yAxisLabel,s=e.xValue,u=e.yValue,m=n-l.right-l.left,h=r-l.top-l.bottom,d=Object(A.m)().domain(Object(A.l)(1,25)).range([0,m]).padding(.1),p=Object(A.n)().domain([1,0]).range([0,h]).nice(),f=Object(A.n)().domain([1,24]).range([0,1]),g=Object(A.a)(d).tickSize(-h).tickPadding(15),b=Object(A.b)(p).tickSize(-m).tickPadding(10),y=a.selectAll(".container").data([null]),v=y.enter().append("g").attr("class","container");v.merge(y).attr("transform","translate(".concat(l.left,", ").concat(l.top,")"));var E=y.select(".x-axis"),x=v.append("g").attr("class","x-axis");E.merge(x).call(g).attr("transform","translate(0, ".concat(h,")")).selectAll("domain").remove(),x.append("text").attr("class","axis-label").attr("y",40).attr("font-size",20).attr("fill","black").attr("text-anchor","middle").merge(E.select(".axis-label")).attr("x",m/2).text(o);var k=y.select(".y-axis"),C=v.append("g").attr("class","y-axis");k.merge(C).call(b).selectAll("domain").remove(),C.append("text").attr("class","axis-label").attr("y",-35).attr("fill","black").attr("transform","rotate(-90)").attr("text-anchor","middle").attr("font-size",20).merge(k.select(".axis-label")).attr("x",-h/2).text(i);var O=Object(A.d)(".2f"),j=y.merge(v).selectAll(".rect-channel").data(t,(function(e){return s(e)})),w=j.enter().append("rect").attr("class","rect-channel").attr("channel",(function(e){return s(e)})).attr("stroke",(function(e){return Object(A.f)(f(s(e)))})).attr("fill",(function(e){return Object(A.f)(f(s(e)))})).attr("stroke-width",2).attr("stroke-linecap","round").attr("width",(function(e){return d.bandwidth()})).attr("y",(function(e){return h})).attr("height",0);w.merge(j).transition().attr("x",(function(e){return d(s(e))})).attr("y",(function(e){return p(u(e))})).attr("height",(function(e){return h-p(u(e))}));var T=j.merge(w).selectAll(".rect-channel-title").data((function(e){return[e]}));T.enter().append("title").attr("class","rect-channel-title").merge(T).text((function(e){return"Channel ".concat(s(e),"\nOccupancy: ").concat(O(u(e)),"%")}));var S=y.select(".title-group"),I=v.append("g").attr("class","title-group");S.merge(I).attr("transform","translate(".concat(m/2,", -10)")),I.append("text").attr("class","chart-title").attr("y",0).attr("font-size",30).attr("fill","black").attr("text-anchor","middle").merge(S.select(".chart-title")).text(c)}},{key:"render",value:function(){var e;return this.state.loading>0&&(e=r.a.createElement("div",{className:"loader"},r.a.createElement(N.a,{animation:"border"}))),r.a.createElement("section",null,e,r.a.createElement("svg",{id:"occupacy-channel-chart"}))}}]),a}(n.Component),V=a(24);function L(e,t,a,n,r){var l=60*parseInt(t)+parseInt(a),c=60*parseInt(n)+parseInt(r),o=60*e.getHours()+e.getMinutes();return o>=l&&o<=c}var z=function(e){Object(v.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={data:[],loading:0,selectedChannels:[]},n.handleChannelChange=n.handleChannelChange.bind(Object(O.a)(n)),n}return Object(y.a)(a,[{key:"componentDidMount",value:function(){this.setupDraw(),this.loadData()}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.threshold,n=t.from,r=t.to,l=t.ratio;a===e.threshold&&l===e.ratio||this.loadData(),n===e.from&&r===e.to||this.filterData()}},{key:"componentWillUnmount",value:function(){I.abort()}},{key:"handleChannelChange",value:function(e){var t=this.state.selectedChannels;t.includes(e)?t.splice(t.findIndex((function(t){return t===e})),1):t.push(e),this.setState((function(){return{selectedChannels:t}}),(function(){this.filterData()}))}},{key:"loadData",value:function(){var e=this,t=this.props,a=t.threshold,n=t.ratio;this.setState((function(){return{loading:1}})),I.getChannelsValues(a,n).then((function(t){var a=t.data.map((function(e){return Object(S.a)(Object(S.a)({},e),{},{From:(t=e.From,a=-2,(t=new Date(t)).setHours(t.getHours()+a),t),visibility:"visible"});var t,a}));e.setState((function(e){return{data:a,loading:e.loading-1}}),(function(){this.filterData()}))})).catch((function(){e.setState((function(e){return{loading:e.loading-1}}))}))}},{key:"filterData",value:function(){var e=this.state,t=e.data,a=e.selectedChannels,n=this.props,r=n.from,l=n.to,c=[],o=function(e){return a.includes(e.Channel)&&L.apply(void 0,[e.From].concat(Object(V.a)(r.split(":")),Object(V.a)(l.split(":"))))?"visible":"hidden"};c=a.length>0?t.map((function(e){return Object(S.a)(Object(S.a)({},e),{},{visibility:o(e)})})):t.map((function(e){return Object(S.a)(Object(S.a)({},e),{},{visibility:L.apply(void 0,[e.From].concat(Object(V.a)(r.split(":")),Object(V.a)(l.split(":"))))?"visible":"hidden"})})),this.setState((function(){return{data:c}}),(function(){this.drawChart()}))}},{key:"setupDraw",value:function(){var e={top:40,right:110,bottom:60,left:65},t=Object(A.s)("#value-channel-chart").attr("viewbox","(0, 0, 960, 500)").attr("width","100%").attr("height",500),a=t.node().getBoundingClientRect(),n=a.width,r=a.height,l=function(e){return e.From},c=function(e){return e.Averaged},o=function(e){return e.Channel};this.setState((function(){return{selection:t,width:n,height:r,margin:e,title:"Runchart",xAxisLabel:"Time",yAxisLabel:"Value",xValue:l,yValue:c,cValue:o}}),(function(){this.drawChart()}))}},{key:"drawChart",value:function(){var e=this.state,t=e.data,a=e.selection,n=e.width,r=e.height,l=e.margin,c=e.title,o=e.xAxisLabel,i=e.yAxisLabel,s=e.xValue,u=e.yValue,m=e.cValue,h=e.selectedChannels,d=n-l.right-l.left,p=r-l.top-l.bottom,f=Object(A.p)().domain(Object(A.c)(t.filter((function(e){return"visible"===e.visibility})),s)).range([0,d]),g=Object(A.n)().domain([Object(A.j)(t,(function(e){return u(e)})),Object(A.i)(t,(function(e){return u(e)}))]).range([p,0]).nice(),b=Object(A.o)().domain(Object(A.l)(1,25)).range(A.q),y=Object(A.a)(f).tickSize(-p).tickPadding(15).tickFormat(Object(A.t)("%H:%M")).ticks(A.u.every(15)),v=Object(A.b)(g).tickSize(-d).tickPadding(10),E=a.selectAll(".container").data([null]),x=E.enter().append("g").attr("class","container");x.merge(E).attr("transform","translate(".concat(l.left,", ").concat(l.top,")"));var k=E.select(".x-axis"),C=x.append("g").attr("class","x-axis");k.merge(C).call(y).attr("transform","translate(0, ".concat(p,")")).selectAll("domain").remove(),C.append("text").attr("class","axis-label").attr("y",40).attr("font-size",20).attr("fill","black").attr("text-anchor","middle").merge(k.select(".axis-label")).attr("x",d/2).text(o);var O=E.select(".y-axis"),j=x.append("g").attr("class","y-axis");O.merge(j).call(v).selectAll("domain").remove(),j.append("text").attr("class","axis-label").attr("y",-35).attr("fill","black").attr("transform","rotate(-90)").attr("text-anchor","middle").attr("font-size",20).merge(O.select(".axis-label")).attr("x",-p/2).text(i);var w=E.select(".channels"),T=x.append("g").attr("class","channels"),S=w.merge(T).selectAll(".channel-value-circle").data(t),I=S.enter().append("circle").attr("class","channel-value-circle").attr("stroke",(function(e){return"none"})).attr("fill",(function(e){return b(m(e))})).attr("r",5).attr("opacity",1);I.merge(S).attr("cx",(function(e){return f(s(e))})).attr("cy",(function(e){return g(u(e))})).transition().attr("opacity",(function(e){return"visible"===e.visibility?1:0}));var N=Object(A.d)(".2f"),D=Object(A.t)("%H:%M:%S"),B=S.merge(I).selectAll(".circle-channel-title").data((function(e){return[e]}));B.enter().append("title").attr("class","circle-channel-title").merge(B).text((function(e){return"Channel ".concat(m(e),"\nOccupancy: ").concat(N(u(e)),"%\nTimestamp: ").concat(D(s(e)))})),S.exit().remove();var V=Object(A.k)().key((function(e){return m(e)})).entries(t),L=Object(A.h)().x((function(e){return f(s(e))})).y((function(e){return g(u(e))})),z=w.merge(T).selectAll(".channel-value-line").data(V);z.enter().append("path").attr("class","channel-value-line").attr("stroke",(function(e){return b(e.key)})).attr("fill","none").attr("opacity",1).merge(z).transition().attr("opacity",(function(e){return e.values.some((function(e){return"visible"===e.visibility}))?1:0})).attr("d",(function(e){return L(e.values)})),z.exit().remove();var H=E.select(".legends"),U=x.append("g").attr("class","legends").attr("transform","translate(".concat(d+20,", -").concat(l.top,")")),F=H.merge(U).selectAll(".legend-group").data(Object(A.l)(1,25)),P=F.enter().append("g").attr("transform",(function(e){return"translate(0, ".concat(20*e,")")})).on("click",this.handleChannelChange);P.merge(F).attr("class",(function(e){return"legend-group ".concat(h.includes(e)?"active":"")})),P.append("circle").attr("fill",(function(e){return b(e)})).attr("cy",0).attr("cx",0).attr("r",5),P.append("text").text((function(e){return"Channel ".concat(e)})).attr("transform","translate(10, 5)");var G=E.select(".title-group"),R=x.append("g").attr("class","title-group");G.merge(R).attr("transform","translate(".concat(d/2,", -10)")),R.append("text").attr("class","chart-title").attr("y",0).attr("font-size",30).attr("fill","black").attr("text-anchor","middle").merge(G.select(".chart-title")).text(c)}},{key:"render",value:function(){var e;return this.state.loading>0&&(e=r.a.createElement("div",{className:"loader"},r.a.createElement(N.a,{animation:"border"}))),r.a.createElement("section",null,e,r.a.createElement("svg",{id:"value-channel-chart"}))}}]),a}(n.Component);function H(e,t,a,n,r){var l=60*parseInt(t)+parseInt(a),c=60*parseInt(n)+parseInt(r),o=60*e.getHours()+e.getMinutes();return o>=l&&o<=c}var U=function(e){Object(v.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={data:[],loading:0},n}return Object(y.a)(a,[{key:"componentDidMount",value:function(){this.setupDraw(),this.loadData()}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.threshold,n=t.ratio,r=t.from,l=t.to;a!==e.threshold||n!==e.ratio?this.loadData():r===e.from&&l===e.to||this.filterData()}},{key:"componentWillUnmount",value:function(){I.abort()}},{key:"loadData",value:function(){var e=this,t=this.props,a=t.threshold,n=t.ratio;this.setState((function(){return{loading:1}})),I.getChannelsValues(a,n).then((function(t){var a=t.data.map((function(e){return Object(S.a)(Object(S.a)({},e),{},{From:(t=e.From,a=-2,(t=new Date(t)).setHours(t.getHours()+a),t),visibility:"visible"});var t,a}));e.setState((function(e){return{data:a,loading:e.loading-1}}),(function(){this.filterData()}))})).catch((function(){e.setState((function(e){return{loading:e.loading-1}}))}))}},{key:"filterData",value:function(){var e,t=this.state.data,a=this.props,n=a.from,r=a.to;e=t.map((function(e){return Object(S.a)(Object(S.a)({},e),{},{visibility:H.apply(void 0,[e.From].concat(Object(V.a)(n.split(":")),Object(V.a)(r.split(":"))))?"visible":"hidden"})})),this.setState((function(){return{data:e}}),(function(){this.drawChart()}))}},{key:"setupDraw",value:function(){var e={top:40,right:20,bottom:60,left:65},t=Object(A.s)("#value-channel-spectrogram").attr("viewbox","(0, 0, 960, 500)").attr("width","100%").attr("height",500),a=t.node().getBoundingClientRect(),n=a.width,r=a.height,l=function(e){return e.From},c=function(e){return e.Channel},o=function(e){return e.Averaged};this.setState((function(){return{selection:t,width:n,height:r,margin:e,title:"Channel occupancy spectrogram",xAxisLabel:"Time",yAxisLabel:"Channel",xValue:l,yValue:c,cValue:o}}),(function(){this.drawChart()}))}},{key:"drawChart",value:function(){var e=this.state,t=e.data,a=e.selection,n=e.width,r=e.height,l=e.margin,c=e.title,o=e.xAxisLabel,i=e.yAxisLabel,s=e.xValue,u=e.yValue,m=e.cValue,h=n-l.right-l.left,d=r-l.top-l.bottom,p=Object(A.p)().domain(Object(A.c)(t.filter((function(e){return"visible"===e.visibility})),s)).range([0,h]),f=Object(A.m)().domain(Object(A.l)(1,25)).range([0,d]),g=Object(A.a)(p).tickSize(-d).tickPadding(15).tickFormat(Object(A.t)("%H:%M")).ticks(A.u.every(15)),b=Object(A.b)(f).tickSize(-h).tickPadding(10),y=a.selectAll(".container").data([null]),v=y.enter().append("g").attr("class","container");v.merge(y).attr("transform","translate(".concat(l.left,", ").concat(l.top,")"));var E=y.select(".x-axis"),x=v.append("g").attr("class","x-axis");E.merge(x).call(g).attr("transform","translate(0, ".concat(d,")")).selectAll("domain").remove(),x.append("text").attr("class","axis-label").attr("y",40).attr("font-size",20).attr("fill","black").attr("text-anchor","middle").merge(E.select(".axis-label")).attr("x",h/2).text(o);var k=y.select(".y-axis"),C=v.append("g").attr("class","y-axis");k.merge(C).call(b).selectAll("domain").remove(),C.append("text").attr("class","axis-label").attr("y",-35).attr("fill","black").attr("transform","rotate(-90)").attr("text-anchor","middle").attr("font-size",20).merge(k.select(".axis-label")).attr("x",-d/2).text(i);var O=Math.ceil(h/(t.filter((function(e){return"visible"===e.visibility})).length/24)),j=y.select(".channels"),w=v.append("g").attr("class","channels"),T=j.merge(w).selectAll(".channel-value").data(t,(function(e){return e.Channel+e.From}));T.enter().append("rect").attr("class","channel-value").attr("value",(function(e){return m(e)})).attr("stroke",(function(e){return"none"})).attr("fill",(function(e){return Object(A.e)(m(e))})).attr("height",0).attr("y",0).attr("x",0).merge(T).transition().attr("visibility",(function(e){return e.visibility})).attr("width",O).attr("height",(function(e){return f.bandwidth()})).attr("x",(function(e){return p(s(e))})).attr("y",(function(e){return f(u(e))})),T.exit().remove();var S=y.select(".title-group"),I=v.append("g").attr("class","title-group");S.merge(I).attr("transform","translate(".concat(h/2,", -10)")),I.append("text").attr("class","chart-title").attr("y",0).attr("font-size",30).attr("fill","black").attr("text-anchor","middle").merge(S.select(".chart-title")).text(c)}},{key:"render",value:function(){var e;return this.state.loading>0&&(e=r.a.createElement("div",{className:"loader"},r.a.createElement(N.a,{animation:"border"}))),r.a.createElement("section",null,e,r.a.createElement("svg",{id:"value-channel-spectrogram"}))}}]),a}(n.Component),F=a(206),P=a(104),G=a.n(P),R=function(e){Object(v.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={id:e.match.params.id,bandOccupancy:{threshold:150,dbthreshold:150},channelOccupancy:{threshold:150,dbthreshold:150},runchart:{threshold:150,dbthreshold:150,from:"17:00",to:"23:00",ratio:30},spectogram:{threshold:150,dbthreshold:150,from:"17:00",to:"23:00",ratio:30}},n.debouncedHandleThresholdChange=G()(n.debouncedHandleThresholdChange.bind(Object(O.a)(n)),1e3),n.handleThresholdChange=n.handleThresholdChange.bind(Object(O.a)(n)),n.handleParamChange=n.handleParamChange.bind(Object(O.a)(n)),n}return Object(y.a)(a,[{key:"handleThresholdChange",value:function(e,t){e.persist(),this.setState((function(a){return Object(T.a)({},t,Object(S.a)(Object(S.a)({},a[t]),{},{threshold:e.target.value}))})),this.debouncedHandleThresholdChange(e,t)}},{key:"debouncedHandleThresholdChange",value:function(e,t){e.persist(),this.setState((function(a){return Object(T.a)({},t,Object(S.a)(Object(S.a)({},a[t]),{},{dbthreshold:e.target.value}))}))}},{key:"handleParamChange",value:function(e,t,a){e.persist(),this.setState((function(n){return Object(T.a)({},t,Object(S.a)(Object(S.a)({},n[t]),{},Object(T.a)({},a,e.target.value)))}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.id,n=t.bandOccupancy,l=t.channelOccupancy,c=t.runchart,m=t.spectogram;return r.a.createElement("div",null,r.a.createElement(o.a,{fluid:!0},r.a.createElement(i.a,null,r.a.createElement(s.a,null,r.a.createElement(u.a,{xs:4},r.a.createElement("div",{className:"place-jumbotron-title"},r.a.createElement("h1",null,"Camp Nou"),r.a.createElement("h4",null,"Sold-Out Stadium"))),r.a.createElement(u.a,{xs:8},r.a.createElement(d.a,{src:"/images/places/"+a+".jpg",rounded:!0}))))),r.a.createElement(i.a,{fluid:!0},r.a.createElement(s.a,null,r.a.createElement(u.a,{xs:10},r.a.createElement(D,{threshold:n.dbthreshold})),r.a.createElement(u.a,{xs:2},r.a.createElement(u.a,{xs:12},r.a.createElement(F.a,null,r.a.createElement(F.a.Group,{controlId:"bandOccupancyThreshold"},r.a.createElement(F.a.Label,null,"Threshold [",n.threshold,"]"),r.a.createElement(F.a.Control,{onChange:function(t){return e.handleThresholdChange(t,"bandOccupancy")},type:"range",value:n.threshold,min:"50",max:"500",step:"10"})))),r.a.createElement(u.a,{xs:12,className:"text-center"},r.a.createElement(d.a,{className:"img-fluid",src:"/images/formulas/band_occupacy.png",rounded:!0})))),r.a.createElement(s.a,null,r.a.createElement(u.a,{xs:10},r.a.createElement(B,{threshold:l.dbthreshold})),r.a.createElement(u.a,{xs:2},r.a.createElement(u.a,{xs:12},r.a.createElement(F.a,null,r.a.createElement(F.a.Group,{controlId:"channelOccupancyThreshold"},r.a.createElement(F.a.Label,null,"Threshold [",l.threshold,"]"),r.a.createElement(F.a.Control,{onChange:function(t){return e.handleThresholdChange(t,"channelOccupancy")},type:"range",value:l.threshold,min:"50",max:"500",step:"10"})))),r.a.createElement(u.a,{xs:12,className:"text-center"},r.a.createElement(d.a,{className:"img-fluid",src:"/images/formulas/channel_occupacy.png",rounded:!0})))),r.a.createElement(s.a,null,r.a.createElement(u.a,{xs:10},r.a.createElement(z,{threshold:c.dbthreshold,from:c.from,to:c.to,ratio:c.ratio})),r.a.createElement(u.a,{xs:2},r.a.createElement(u.a,{xs:12},r.a.createElement(F.a,null,r.a.createElement(F.a.Group,{controlId:"runchartThreshold"},r.a.createElement(F.a.Label,null,"Threshold [",c.threshold,"]"),r.a.createElement(F.a.Control,{onChange:function(t){return e.handleThresholdChange(t,"runchart")},type:"range",value:c.threshold,min:"50",max:"500",step:"10"})),r.a.createElement(s.a,null,r.a.createElement(u.a,{xs:6},r.a.createElement(F.a.Group,null,r.a.createElement(F.a.Label,null,"From [",c.from,"]"),r.a.createElement(F.a.Control,{onChange:function(t){return e.handleParamChange(t,"runchart","from")},type:"time",value:c.from,min:"17:20",max:"20:00",step:"600"}))),r.a.createElement(u.a,{xs:6},r.a.createElement(F.a.Group,null,r.a.createElement(F.a.Label,null,"To [",c.to,"]"),r.a.createElement(F.a.Control,{onChange:function(t){return e.handleParamChange(t,"runchart","to")},type:"time",value:c.to,min:"17:30",max:"20:00",step:"600"})))),r.a.createElement(F.a.Group,{controlId:"runchartRatio"},r.a.createElement(F.a.Label,null,"Sliding window"),r.a.createElement(F.a.Control,{onChange:function(t){return e.handleParamChange(t,"runchart","ratio")},as:"select",value:c.ratio},r.a.createElement("option",{value:"30"},"5 min"),r.a.createElement("option",{value:"60"},"10 min"),r.a.createElement("option",{value:"90"},"15 min"))))),r.a.createElement(u.a,{xs:12},r.a.createElement("p",null,"Each value represents an average of 1000 values for each channel at one moment in time. The values, before being averaged, are being thresholded by the selected value.")))),r.a.createElement(s.a,null,r.a.createElement(u.a,{xs:10},r.a.createElement(U,{threshold:m.dbthreshold,from:m.from,to:m.to,ratio:m.ratio})),r.a.createElement(u.a,{xs:2},r.a.createElement(u.a,{xs:12},r.a.createElement(F.a,null,r.a.createElement(F.a.Group,{controlId:"spectogramThreshold"},r.a.createElement(F.a.Label,null,"Threshold [",m.threshold,"]"),r.a.createElement(F.a.Control,{onChange:function(t){return e.handleThresholdChange(t,"spectogram")},type:"range",value:m.threshold,min:"50",max:"500",step:"10"})),r.a.createElement(s.a,null,r.a.createElement(u.a,{xs:6},r.a.createElement(F.a.Group,null,r.a.createElement(F.a.Label,null,"From [",m.from,"]"),r.a.createElement(F.a.Control,{onChange:function(t){return e.handleParamChange(t,"spectogram","from")},type:"time",value:m.from,min:"17:30"}))),r.a.createElement(u.a,{xs:6},r.a.createElement(F.a.Group,null,r.a.createElement(F.a.Label,null,"To [",m.to,"]"),r.a.createElement(F.a.Control,{onChange:function(t){return e.handleParamChange(t,"spectogram","to")},type:"time",value:m.to})))),r.a.createElement(F.a.Group,{controlId:"spectogramRatio"},r.a.createElement(F.a.Label,null,"Sliding window"),r.a.createElement(F.a.Control,{onChange:function(t){return e.handleParamChange(t,"spectogram","ratio")},as:"select",value:m.ratio},r.a.createElement("option",{value:"30"},"5 min"),r.a.createElement("option",{value:"60"},"10 min"),r.a.createElement("option",{value:"90"},"15 min"))))),r.a.createElement(u.a,{xs:12},r.a.createElement("p",null,"Each color represents an average of 1000 values for each channel at one moment in time. The values, before being averaged, are being thresholded by the selected value. The displayed values are filtered by the timespan selected with the above buttons."))))))}}]),a}(n.Component),M=a(209),_=a(207),W=a(105),J=a(6);a(196),a(197);var K=function(){return r.a.createElement(f.a,null,r.a.createElement(M.a,{bg:"light",expand:"lg"},r.a.createElement(M.a.Brand,{href:"/"},"WIFI Visualizer"),r.a.createElement(M.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(M.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(_.a,{className:"mr-auto"},r.a.createElement(f.b,{to:"/",className:"nav-link"},"Home"),r.a.createElement(f.b,{to:"/places",className:"nav-link"},"Locations"),r.a.createElement(f.b,{to:"/about",className:"nav-link"},"About")),r.a.createElement(F.a,{inline:!0},r.a.createElement(W.a,{type:"text",placeholder:"Search",className:"mr-sm-2"}),r.a.createElement(p.a,{variant:"outline-success"},"Search")))),r.a.createElement(J.c,null,r.a.createElement(J.a,{path:"/places/:id",component:R}),r.a.createElement(J.a,{path:"/places"},r.a.createElement(w,null)),r.a.createElement(J.a,{path:"/"},r.a.createElement(g,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},54:function(e){e.exports=JSON.parse('{"panControl":false,"mapTypeControl":false,"clickableIcons":false,"styles":[{"elementType":"geometry","stylers":[{"color":"#f5f5f5"}]},{"elementType":"labels.icon","stylers":[{"visibility":"off"}]},{"elementType":"labels.text.fill","stylers":[{"color":"#616161"}]},{"elementType":"labels.text.stroke","stylers":[{"color":"#f5f5f5"}]},{"featureType":"administrative.land_parcel","elementType":"labels.text.fill","stylers":[{"color":"#bdbdbd"}]},{"featureType":"poi","elementType":"geometry","stylers":[{"color":"#eeeeee"}]},{"featureType":"poi","elementType":"labels.text.fill","stylers":[{"color":"#757575"}]},{"featureType":"poi.park","elementType":"geometry","stylers":[{"color":"#e5e5e5"}]},{"featureType":"poi.park","elementType":"labels.text.fill","stylers":[{"color":"#9e9e9e"}]},{"featureType":"road","elementType":"geometry","stylers":[{"color":"#ffffff"}]},{"featureType":"road.arterial","elementType":"labels.text.fill","stylers":[{"color":"#757575"}]},{"featureType":"road.highway","elementType":"geometry","stylers":[{"color":"#dadada"}]},{"featureType":"road.highway","elementType":"labels.text.fill","stylers":[{"color":"#616161"}]},{"featureType":"road.local","elementType":"labels.text.fill","stylers":[{"color":"#9e9e9e"}]},{"featureType":"transit.line","elementType":"geometry","stylers":[{"color":"#e5e5e5"}]},{"featureType":"transit.station","elementType":"geometry","stylers":[{"color":"#eeeeee"}]},{"featureType":"water","elementType":"geometry","stylers":[{"color":"#c9c9c9"}]},{"featureType":"water","elementType":"labels.text.fill","stylers":[{"color":"#9e9e9e"}]}]}')}},[[165,1,2]]]);
//# sourceMappingURL=main.1036b27c.chunk.js.map